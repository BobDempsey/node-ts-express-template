### VS Code REST Client tests
### Start the dev server first: `npm run dev`
### Then click "Send Request" above any request below

@baseUrl = http://localhost:3000

# You can override baseUrl per environment by creating a `.vscode/settings.json`
# or using REST Client environment files.

###############################################################################
# Basic GET Requests
###############################################################################

### GET root - Basic request (200 OK)
# This is the only defined route - should return the greeting message
GET {{baseUrl}}/
Accept: text/plain

### GET root - With custom header (200 OK)
GET {{baseUrl}}/
Accept: text/plain
X-Custom-Header: TestValue
User-Agent: VSCode-REST-Client

### GET undefined route - Returns 404
# Express returns 404 for routes that aren't defined
# Expected response: {"error": "Not Found"}
GET {{baseUrl}}/api/test

###############################################################################
# POST Requests (All return 404 - no POST routes defined)
###############################################################################

### POST root - JSON payload (404)
# Only GET / is defined, so POST returns 404
POST {{baseUrl}}/
Content-Type: application/json

{
  "message": "hello",
  "timestamp": "2025-12-04T00:00:00Z"
}

### POST root - Form data (404)
# Body will be parsed by express.urlencoded() middleware
# But route isn't defined, so returns 404
POST {{baseUrl}}/
Content-Type: application/x-www-form-urlencoded

name=test&value=123

### POST to API endpoint - JSON payload (404)
# Example of what a future API route might look like
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com"
}

###############################################################################
# Other HTTP Methods (All return 404 - no routes defined)
###############################################################################

### PUT request (404)
PUT {{baseUrl}}/resource
Content-Type: application/json

{
  "id": 1,
  "updated": true
}

### DELETE request (404)
DELETE {{baseUrl}}/resource/1

### PATCH request (404)
PATCH {{baseUrl}}/resource/1
Content-Type: application/json

{
  "field": "updated value"
}

###############################################################################
# Security Headers (Helmet Middleware)
###############################################################################

### GET root - Verify security headers
# Check response headers to see Helmet's security headers in action:
# - Content-Security-Policy: Controls resource loading
# - X-Content-Type-Options: nosniff (prevents MIME sniffing)
# - X-Frame-Options: SAMEORIGIN (prevents clickjacking)
# - Strict-Transport-Security: Enforces HTTPS
# - X-DNS-Prefetch-Control: off (controls DNS prefetching)
# - Referrer-Policy: no-referrer (controls referrer information)
GET {{baseUrl}}/

### GET any route - Security headers are applied globally
# Helmet middleware applies security headers to all routes, including 404s
GET {{baseUrl}}/api/nonexistent

###############################################################################
# CORS (Cross-Origin Resource Sharing)
###############################################################################

### GET with Origin header - Check CORS response
# CORS middleware allows cross-origin requests
# Check for CORS headers in response:
# - Access-Control-Allow-Origin: Specifies allowed origin(s)
# - Access-Control-Allow-Credentials: true (allows cookies)
# - Access-Control-Expose-Headers: Lists exposed headers
GET {{baseUrl}}/
Origin: http://example.com

### OPTIONS preflight request - CORS preflight
# Browsers send OPTIONS request before actual cross-origin requests
# Check for:
# - Access-Control-Allow-Methods: Allowed HTTP methods
# - Access-Control-Allow-Headers: Allowed request headers
# - Access-Control-Max-Age: Cache duration for preflight response
OPTIONS {{baseUrl}}/
Origin: http://example.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type, Authorization

### POST with Origin - CORS actual request
# After successful preflight, browser sends actual request
# Response will include CORS headers
POST {{baseUrl}}/
Origin: http://example.com
Content-Type: application/json

{
  "test": "data"
}

### GET with custom origin - Environment-specific origin
# To restrict origins in production, set CORS_ORIGIN env variable:
# Example: CORS_ORIGIN="http://localhost:3000,https://myapp.com"
GET {{baseUrl}}/
Origin: http://localhost:3000

### GET from different origin - Multiple origins
# CORS supports multiple origins via comma-separated CORS_ORIGIN
# Example: CORS_ORIGIN="http://origin1.com,http://origin2.com"
GET {{baseUrl}}/
Origin: http://trusted-origin.com

###############################################################################
# Edge Cases
###############################################################################

### GET with Accept: application/json
# Express res.send() will auto-detect content type
GET {{baseUrl}}/
Accept: application/json

### Large payload POST (404)
# Middleware will parse the JSON body successfully
# But route isn't defined, so returns 404
POST {{baseUrl}}/
Content-Type: application/json

{
  "data": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
  "items": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  "nested": {
    "level1": {
      "level2": {
        "level3": "deep value"
      }
    }
  }
}

###############################################################################
# Examples: Add Your Own Routes
###############################################################################
# Uncomment and modify these after adding corresponding routes to src/index.ts

# ### GET users list
# GET {{baseUrl}}/api/users

# ### GET single user
# GET {{baseUrl}}/api/users/1

# ### POST create user
# POST {{baseUrl}}/api/users
# Content-Type: application/json
#
# {
#   "name": "Jane Smith",
#   "email": "jane@example.com"
# }

# ### PUT update user
# PUT {{baseUrl}}/api/users/1
# Content-Type: application/json
#
# {
#   "name": "Jane Doe",
#   "email": "jane.doe@example.com"
# }

# ### DELETE user
# DELETE {{baseUrl}}/api/users/1
